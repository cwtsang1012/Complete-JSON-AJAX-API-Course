<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>AJAX</title>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
</head>

<body>
	<h1>Learn AJAX - Fetch</h1>
	<p>Not support cross browser right now. Similar to XMLHttpRequest, but slightly better than XMLHttpRequest.</p>
	<p>It is more flexible than XMLHttpRequest since it has option to send header</p>
	<div id="output"></div>
	<button id='trigger'>Post with Fetch</button>
	
	<script type="text/javascript">
		//solution in video
		//var joker = document.querySelector('#trigger');
		//joker.addEventListener('click', loadJoke);
		
		$('#trigger').click(loadJoke);
		
		function loadJoke(){
			const url = "http://s179017901.onlinehome.us/discoveryvip";
			const myData = 'foo=bar&lorem=ipsum';
			
			//since the url is not worked in https...it is blocked by web browser and throw error
			fetch(url, {
				mode: 'no-cors', 
				method: 'post',
				headers: {"Content-type": "application/x-www-form-urlencoded; charset=UTF-8"},
				body: myData
			})
			.then(function(response){
				return response.text()
			})
			.then(function(data){
				console.log(data);
			});
			.catch(function(error) { console.log(error); });
		}
		//Reference Link: https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch
	</script>
</body>
</html>